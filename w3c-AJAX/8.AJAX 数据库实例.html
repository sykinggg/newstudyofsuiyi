<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>AJAX 数据库实例</title>
	</head>
	<body>
		<h1>AJAX 数据库实例</h1>
		<p>AJAX 可用来与数据库进行动态通信</p>

		<p>AJAX 数据库实例</p>
		<p>下拉列表与后台数据的交互</p>
		<script>
			/*
			*
			*当用户在上面的下拉列表中选择某个客户时，会执行名为 "showCustomer()" 的函数。该函数由 "onchange" 事件触发
			*
			**/
			function showCustomer(str) {
				var xmlHttp;
				if(str == "") {
					document.getElementById('txtHint').innerHTML = "";
					return;
				}
				if(window.XMLHttpRequest) {
					xmlHttp = new XMLHttpRequest();
				}else{
					xmlHttp = new ActiveXObject("microsoft.XMLHTTP");
				}
				xmlHttp.onreadyStatechange = function() {
					if(xmlHttp.readyState==4&&xmlHttp.status==200) {
						document.getElementById('txtHint').innerHTML = "xmlHttp.responseText";
					}
				}
				xmlHttp.open('GET', "getcustomer.asp?q="+str, true);
				xmlHttp.send();
			}
		</script>
		<h3>代码描述</h3>
		<p>showCustomer() 函数执行以下任务</p>
		<ul>
			<li>检查是否已选择某个客户</li>
			<li>创建 XMLHttpRequest 对象</li>
			<li>当服务器响应就绪时执行所创建的函数</li>
			<li>把请求发送到服务器上的文件</li>
			<li>请注意我们向 URL 添加了一个参数 q （带有输入域中的内容）</li>
		</ul>
	</body>
</html>