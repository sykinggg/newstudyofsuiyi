<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>循环与迭代</title>
	</head>
	<body>
		<script>
			/*语法格式*/
			var step;
			for(step = 0; step < 5; step++) {
				/*运行5次，与步骤0至4的值*/
				console.log('Walking east one step');
			}
		</script>
		<h3>机制描述</h3>
		<p>循环有很多种类，但本质上它们都做的是同一件事：它们把一个动作重复了很多次（实际上重复的次数有可能为0）</p>
		<p>各种循环机制提供了不同的方法去确定循环的开始和结束</p>
		<h3>javascript提供的循环机制</h3>
		<p><a href="">for statement</a></p>
		<p><a href="">do...while statement</a></p>
		<p><a href="">while statement</a></p>
		<p><a href="">label statement</a></p>
		<p><a href="">break statement</a></p>
		<p><a href="">continue statement</a></p>
		<p><a href="">for...in statement</a></p>
		<p><a href="">for...of statement</a></p>




		<h1>for语句</h1>
		<p>一个for循环会一直重复执行，直到指定的循环条件为fasle</p>
		<h2>语法格式</h2>
		<script>
			// for ([initialExpression]; [condition]; [incrementExpression]) 
			// 	statement
		</script>
		<h2>语法描述</h2>
		<p>当一个for循环执行的时候，会发生以下事件</p>
		<ul>
			<li>1.如果有初始化表达式initialExpression，它将被执行</li>
			<span>这个表达式通常会初始化一个或多个循环计数器，但语法上是允许一个任意复杂度的表达式的</span>
			<span><b>这个表达式也可以声明变量</b></span>
			<li>2.计算condition表达式的值</li>
			<p>如果condition的值是true，循环中的statement会被执行。如果condition的值是false，for循环终止</p>
			<p>注意:如果condition表达式整个都被省略掉了，condition的值会被认为是true</p><h1>会死循环的！</h1>
			<li>3.循环中的statement被执行</li>
			<p>如果需要执行多条语句，可以使用块 ({ ... })来包裹这些语句</p>
			<li>4.如果有更新表达式incrementExpression，执行它，然后流程回到步骤2</li>
		</ul>
		<h1>真实示例</h1>
		<form name="selectForm">
			<p>
				<label for="musicTypes">Choose some music types, then click the button below:</label>
				<select name="musicTypes" id="musicTypes" multiple="multiple">
					<option selectec="selected">R&B</option>
					<option>爵士</option>
					<option>布鲁斯</option>
					<option>新纪元</option>
					<option>古典</option>
					<option>戏剧</option>
				</select>
			</p>
			<p><input id="btn" type="button" value="选择了多少个选项?"></p>
		</form>
		<script>
			function howMany(selectObject) {
				var numberSelected = 0;
				for (var i = 0; i < selectObject.options.length; i++) {
					if (selectObject.options[i].selected) {
						numberSelected++;
					}
				}
				return numberSelected;
			}

			var btn = document.getElementById("btn");
			btn.addEventListener('click', function() {
				console.log(howMany(document.selectForm.musicTypes));
				alert('选择选项的数量是: ' + howMany(document.selectForm.musicTypes));
			});
		</script>






		<h1>do...while语句</h1>
		<p>do...while 语句一直重复直到指定的条件求值得到假（false）</p>
		<h2>语法格式</h2>
		<script>
			// do
			// 	statement
			// while (condition);
		</script>
		<h2>语法描述</h2>
		<p>statement 在检查条件之间会执行一次</p>
		<p>要执行多条语句（语句块），要使用块语句 ({ ... }) 包括起来</p>
		<p>如果 condition 为真（true），statement 将再次执行</p>
		<p>在每个执行的结尾会进行条件的检查</p>
		<p>当 condition 为假（false），执行会停止并且把控制权交回给 do...while 后面的语句</p>
		<script>
			/**
			*	循环例子
			*/
			var i = 0;
			do {
				i += 1;
				console.log(i);
			} while (i < 5);
		</script>






		<h1>while语句</h1>
		<p>一个 while 语句只要指定的条件求值为真（true）就会一直执行它的语句块</p>
		<h2>语法格式</h2>
		<script>
			// while (condition)
			// 	statement
		</script>
		<h2>语法描述</h2>
		<p>如果这个条件变为假，循环里的 statement 将会停止执行并把控制权交回给 while 语句后面的代码</p>
		<p>条件检测会在每次 statement 执行之前发生</p>
		<p>如果条件返回为真， statement 会被执行并紧接着再次测试条件</p>
		<p>如果条件返回为假，执行将停止并把控制权交回给 while 后面的语句</p>
		<p>要执行多条语句（语句块），要使用块语句 ({ ... }) 包括起来</p>
		<script>
			/**
			*	栗子一
			*/
			console.log('while语句');
			var n = 0;
			var x = 0;
			while (n < 3) {
				n++;
				x += n;
				console.log("n in"+n);
				console.log("x in"+x);
			}
			console.log("n out"+n);
			console.log("x out"+x);
			/**
			*	bug栗子
			*/
			// while(true) {
			// 	console.log("hello, world");
			// }
		</script>








		<h1>label语句</h1>
		<p>一个 label 提供了一个可以让你引用到您程序别的位置的标识符</p>
		<h2>使用简介</h2>
		<p>可以用 label 标识一个循环， 然后使用 break 或者 continue 来指出程序是否该停止循环还是继续循环</p>
		<h2>语法结构</h2>
		<script>
			// label:
			// 	statement
		</script>
		<p>label 的值可以是任何的非保留字的 JavaScript 标识符， statement 可以是任意你想要标识的语句（块）</p>
		<script>
			/**
			*	标记 markLoop 标识了一个 while 循环
			*/
			console.log("label语句");
			markLoop:
			while (theMark == true) {
				doSomething();
			}
		</script>






		<h1>break语句</h1>
		<p>使用 break 语句来终止循环，switch， 或者是链接到 label 语句</p>
		<ul>
			<li>当你使用不带 label 的 break 时， 它会立即终止当前所在的 while，do-while，for，或者 switch 并把控制权交回这些结构后面的语句</li>
			<li>当你使用带 label 的 break 时，它会终止指定的标记（label）了的语句</li>
		</ul>
		<h2>语法格式</h2>
		<ul>
			<li>1.break;</li>
			<li>2.break label</li>
		</ul>
		<h2>语法描述</h2>
		<p>第一种形式的语法终止当前所在的循环或 switch</p>
		<p>第二种形式的语法终止指定的 label 语句</p>
		<script>
			console.log("break语句");
			/**
			*	循环数组里的元素直到找到一个值是等于 theValue 的
			*/
			var a = [1, 2, 3];
			for (i = 0; i < a.length; i++) {
				if(a[i] == theValue) {
					break;
				}
			}
			/**
			*	终止一个label
			*/
			var x = 0;
			var z = 0;
			labelCancelLoops: while (true) {
				console.log("外部循环" + x );
				x += 1;
				z = 1;
				while (true) {
					console.log("内部循环" + z);
					z += 1;
					if(z === 10 && x === 10) {
						break labelCancelLoops;
					} else if (z === 10) {
						break;	
					}
				}
			}
		</script>







		<h1>continue语句</h1>
		<p>continue 语句可以用来重新开始一个 while， do-while， for， 或者 label 语句</p>
		<ul>
			<li>使用不带 label 的 continue 时， 它终止当前 while，do-while，或者 for 语句到结尾的这次的循环并且继续执行下一次循环</li>
			<li>使用带 label 的 continue 时， 它会应用被 label 标识的循环语句</li>
		</ul>
		<h2>语法格式</h2>
		<script>
			// 1.continue;
			// 2.continue label;
			console.log("----continue语句----");
			/**
			*	栗子一
			*/
			var i = 0;
			var n = 0;
			while (i < 5) {
				i++;
				if(i == 3) {
					continue;
				}
				n += i;
				console.log(i);
				console.log(n);
			}
			/**
			*	描述
			*/
			/*带有一个当 i 等于 3的 continue 语句的循环。 于是， n 取到的值是 1， 3， 7， 12*/
			/**
			*	栗子二
			*/
			checkiandj:
				while (i < 4) {
					console.log(i);
					i += 1;
					checkj: 
						while (j > 4) {
							console.log(j);
							j -= 1;
							if((j % 2) == 0) {
								continue checkj;
							}
							console.log(j + "is add.");
						}
						console.log('i =' + i);
						console.log('j =' + j);
				}
		</script>
		<h3>栗子二描述</h3>
		<p>被标签为checkiandj 的语句包含了一个标签为checkj 的语句</p>
		<p>如果遇到continue语句，程序会结束当前chechj的迭代并开始下一轮的迭代</p>
		<p>每次遇到continue语句，checkj 语句会一直重复执行知道checkj语句的条件为false</p>
		<p>当返回false后，checkiandj的剩余语句将会执行，checkiandj会一直执行指导checkiandj的条件为false</p>
		<p>当checkiandj的返回值为false时，将会执行checkiandj 的下面的语句</p>








		<h1>for...in语句</h1>
		<p>for...in 语句循环一个指定的变量来循环一个对象所有可枚举的属性</p>
		<h2>语法结构</h2>
		<script>
			// for (variable in object) {
			// 	statements
			// }
			console.log('for...in语句');
			/**
			*	栗子一
			*/
			function dump_props(obj, obj_name) {
				var result = "";
				for (var i in obj) {
					result += obj_name + "." + i + "=" + obj[i] + "<br>";
				}
				result += "<hr>";
				return result;
			}
			/*对于一个对象拥有 make 和 model 属性的 car 对象来说，执行结果是*/
			// car.make = ford
			// car.model = Mustang
		</script>



		<h2>数组</h2>
		<p>用for...in来迭代Array元素很诱人，但是它返回的除了数字索引外还有可能是你自定义的属性名字</p>
		<p>用带有数字索引的传统的for 循环来迭代一个数组比较好</p>
		<p>因为如果你想改变数组对象，比如添加属性或者方法，for...in 语句迭代的是 自定义的属性而不是数组的元素</p>
		<h3>数组使用时的语法结构</h3>
		<script>
			// for...of statement
			for (variable of object) {
				statement
			}
		</script>
		<h3>注意:</h3>
		<p>该新特性属于 ECMAScript 2015（ES6）规范，在使用时请注意浏览器兼容性</p>
		<h2>数组使用时的语法描述</h2>
		<p>for...of语句在可迭代的对象上创建了一个循环(包括Array, Map, Set, 参数对象（ arguments） 等等)</p>
		<p>值的每一个独特的属性调用一个将被执行的自定义的和语句挂钩的迭代</p>
		<script>
			/**
			*	栗子
			*/
			let arr = [3, 5, 7];
			arr.foo = "hello";

			for (let i in arr) {
				console.log(i);
				// logs "0", "1", "2", "foo"
			}

			for (let i of arr) {
				console.log(i);
				// logs "3", "5", "7" // 注意这里没有 hello
			}
		</script>
		<h3>代码描述</h3>
		<p>与for...in 循环遍历的结果是数组元素的下标不同的是， for...of 遍历的结果是元素的值</p>
	</body>
</html>