<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>new.target属性</title>
	</head>
	<body>
		<h1>new.target属性</h1>
		<h2>详细描述</h2>
		<p>new是从构造函数生成实例的命令</p>
		<p>ES6为new命令引入了一个new.target属性，（在构造函数中）返回new命令作用于的那个构造函数</p>
		<p>如果构造函数不是通过new命令调用的，new.target会返回undefined，因此这个属性可以用来确定构造函数是怎么调用的</p>
		<script>
			function Person(name) {
				if(new.target !== undefined) {
					this.name = name;
				}else{
					throw new Error("必须使用new生成实例");
				}
			}
			
			//另一种写法！
			function Person(name) {
				if(new.target === Person) {
					this.name = name;
				}else {
					throw new Error("必须使用new生成实例");
				}
			}
			
			var person = new Person('张三'); //正确
			var notAPerson = Person.call(person, '张三'); //报错
		</script>
		<h1>代码解释</h1>
		<h2>代码确保构造函数只能通过new命令调用</h2>
		<h3>Class内部调用new.target，返回当前Class</h3>
		<h3>子类继承父类时，new.target会返回子类</h3>
	</body>
</html>
