<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>npm说明</title>
	</head>
	<body>
		<h1>npm说明</h1>
		<p>查看版本</p>
		<pre>
			npm -v
		</pre>
		<p>npm版本升级</p>
		<pre>
			sudo npmm install npm -g
		</pre>
		<p>window系统的简略升级</p>
		<pre>
			npm install npm -g
		</pre>


		


		<h2>使用npm安装应用</h2>
		<pre>
			npm install <Module Name>
		</pre>

		<h2>安装说明</h2>
		<p>安装好之后，express 包就放在了工程目录下的 node_modules 目录中</p>
		<p>因此在代码中只需要通过 require('express') 的方式就好，无需指定第三方包路径</p>
		<pre>
			var express = require("express");
		</pre>



		


		<h2>全局安装和局部安装</h2>
		<p>npm 的包安装分为本地安装（local）、全局安装（global）两种</p>
		<pre>
			npm install express		#本地安装
			npm install express -g	#全局安装
		</pre>
		<p>如果出现以下错误</p>
		<pre>
			npm err! Error: connect ECONNREFUSED 127.0.0.1:8087
		</pre>
		<p>解决方法</p>
		<pre>
			npm config set proxy null
		</pre>



		<h3>安装目录</h3>

		<h4>本地安装</h4>
		<ul>
			<li>
				<p>将安装包放在 ./node_modules 下（运行 npm 命令时所在的目录）</p>
				<span>如果没有 node_modules 目录，会在当前执行 npm 命令的目录下生成 node_modules 目录</span>
			</li>
			<li>
				<p>可以通过 require() 来引入本地安装的包</p>
			</li>
		</ul>

		<h4>全局安装</h4>
		<ul>
			<li>
				<p>将安装包放在 /usr/local 下或者你 node 的安装目录</p>
			</li>
			<li>
				<p>可以直接在命令行里使用</p>
			</li>
		</ul>

		<h4>两者兼得</h4>
		<p>如果你希望具备两者功能，则需要在两个地方安装它或使用 npm link</p>
		<pre>
			npm install express -g
		</pre>
		<p>安装过程说明</p>
		<span>第一行输出了模块的版本号及安装位置</span>
		<p>示例</p>
		<pre>
			express@4.13.3 node_modules/express
			├── escape-html@1.0.2
			├── range-parser@1.0.2
			├── merge-descriptors@1.0.0
			├── array-flatten@1.1.1
			...
		</pre>

		<h4>查看全局安装的所有模块</h4>
		<pre>
			npm ls -g
		</pre>

		<h4>使用package.json</h4>
		<p>package.json 位于模块的目录下，用于定义包的属性</p>

		<h4>注意: package.json属性说明</h4>
		<ul>
			<li>name-包名</li>
			<li>version-包的版本号</li>
			<li>description-包的描述</li>
			<li>homepage-包的官网URl</li>
			<li>author-包的作者姓名</li>
			<li>contributors-包的其他贡献者姓名</li>
			<li>
				<p>dependencise-依赖包列表</p>
				<h3>注意:如果依赖包没有安装,npm会自动将依赖包安装在node_module目录下</h3>
			</li>
			<li>repository-包代码存放的地方的类型,可以使git,svn</li>
			<li>main-main字段是一个模块ID是应用程序的主要项目</li>
			<li>keywords-关键字</li>
		</ul>

		<h4>卸载模块</h4>
		<pre>
			npm uninstall express
		</pre>
		<p>可以到 /node_modules/ 目录下查看包是否还存在，或者使用以下命令查看</p>
		<pre>
			npm ls
		</pre>

		<h4>更新模块</h4>
		<pre>
			npm update express
		</pre>

		<h4>搜索模块</h4>
		<pre>
			npm search express
		</pre>

		<h4>创建模块</h4>
		<span>创建模块，package.json 文件是必不可少的。可以使用 NPM 生成 package.json 文件，生成的文件包含了基本的结果</span>
		<pre>
			$ npm init
			This utility will walk you through creating a package.json file.
			It only covers the most common items, and tries to guess sensible defaults.

			See `npm help json` for definitive documentation on these fields
			and exactly what they do.

			Use `npm install <pkg> --save` afterwards to install a package and
			save it as a dependency in the package.json file.

			Press ^C at any time to quit.
			name: (node_modules) runoob                   # 模块名
			version: (1.0.0) 
			description: Node.js 测试模块(www.runoob.com)  # 描述
			entry point: (index.js) 
			test command: make test
			git repository: https://github.com/runoob/runoob.git  # Github 地址
			keywords: 
			author: 
			license: (ISC) 
			About to write to ……/node_modules/package.json:      # 生成地址

			{
			  "name": "runoob",
			  "version": "1.0.0",
			  "description": "Node.js 测试模块(www.runoob.com)",
			  ……
			}


			Is this ok? (yes) yes
		</pre>
		<p>在最后输入 "yes" 后会生成 package.json 文件</p>
		<p>接下来可以使用以下命令在 npm 资源库中注册用户（使用邮箱注册）</p>
		<pre>
			$ npm adduser
			Username: mcmohd
			Password:
			Email: (this IS public) mcmohd@gmail.com
		</pre>
		<p>用以下命令来发布模块</p>
		<pre>
			npm publish
		</pre>










		<h2>版本号</h2>
		<p>使用NPM下载和发布代码时都会接触到版本号</p>
		<p>语义版本号分为X.Y.Z三位，分别代表主版本号、次版本号和补丁版本号</p>
		<ul>
			<li>如果只是修复bug，需要更新Z位</li>
			<li>如果是新增了功能，但是向下兼容，需要更新Y位</li>
			<li>如果有大变动，向下不兼容，需要更新X位</li>
		</ul>
	</body>
</html>