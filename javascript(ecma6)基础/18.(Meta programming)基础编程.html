<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
	</head>
	<body>
		<h1>基础编程</h1>
		<p>JavaScript就开始支持Proxy和 Reflect对象，允许你拦截并定制基础语言操作行为（比如，属性查找，赋值，枚举，函数调用，等等）</p>
		<p>通过这两个对象，你可以在JavaScript元级别（meta level）编程</p>










		<h1>代理(Proxies)</h1>
		<p>从ECMAScript6开始引进Proxy对象允许你解释特定操作和实现定制行为</p>
		<script>
			/*获取一个对象的某个属性*/
			var handler = {
				get: function(target, name) {
					return name in target ? target[name] : 42;
				}
			};
			var p = new Proxy({}, handler);
			p.a = 1;
			console.log(p.a, p.b);
			/*1 42*/
		</script>

		<h3>代码描述:</h3>
		<p>Proxy（代理）对象定义一个target和一个handle，handle实现了一个get捕捉方法</p>
		<p>通过这个方法，被代理的对象对于未定义的属性，不再返回undefined，而是返回一个42的数字</p>

		<h3>handler</h3>
		<p>占位符对象包含陷阱</p>

		<h3>traps</h3>
		<p>提供属性访问方法</p>
		<p>这类似于在操作系统陷阱的概念</p>

		<h3>target</h3>
		<p>对象，代理虚拟化</p>
		<p>它经常被用作代理存储后端</p>
		<p>有关对象非扩展性或非配置属性不变（语义不变）验证打击的对象</p>

		<h3>invariants</h3>
		<p>实现自定义操作时保持不变的语义被称为变量</p>
		<p>如果你违反处理程序的不变量，一个TypeError会抛出</p>

		<h3>处理程序和陷阱</h3>
		<p>下表总结了可用于代理对象可用的陷阱</p>

		<table>
			<thead>
				<tr>
					<td>Handler / trap</td><td>Interceptions</td><td>Invariants</td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>handler.getPrototypeOf()</td>
					<td>
						<p>Object.getPrototypeOf()</p>
						<p>Reflect.getPrototypeOf()</p>
						<p>__proto__</p>
						<p>Object.prototype.isPrototypeOf()</p>
						<p>instanceof</p>
					</td>
					<td>
						<p>getPrototypeOf方法必须返回一个对象或null</p>
						<p>如果目标是不可扩展，Object.getPrototypeOf（proxy）方法必须返回相同的值Object.getPrototypeOf（target）。</p>
					</td>
				</tr>
				<tr>
					<td>handler.setPrototypeOf()</td>
					<td>
						<p>Object.setPrototypeOf()</p>
						<p>Reflect.setPrototypeOf()</p>
					</td>
					<td>
						<p>如果目标是不可扩展，原型参数必须是相同的值Object.getPrototypeOf（target）。</p>
					</td>
				</tr>
				<tr>
					<td>handler.isExtensible()</td>
					<td>
						<p>Object.isExtensible()</p>
						<p>Reflect.isExtensible()</p>
					</td>
					<td>
						<p>Object.isExtensible（proxy）必须返回相同的值Object.isExtensible（target）</p>
					</td>
				</tr>
				<tr>
					<td>handler.preventExtensions()</td>
					<td>
						<p>Object.preventExtensions()</p>
						<p>Reflect.preventExtensions()</p>
					</td>
				</tr>
			</tbody>
		</table>
	</body>
</html>