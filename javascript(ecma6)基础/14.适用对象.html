<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>使用对象</title>
	</head>
	<h1>使用对象</h1>
	<h2>简介</h2>
	<p>JavaScript 采用了简单的基于对象的范型</p>
	<p>一个对象就是一系列属性的集合，一个属性包含一个名字和一个值</p>
	<p>一个属性的值可以是函数，这种情况下属性也被称为方法</p>
	<p>除了浏览器里面预定义的那些对象之外，你也可以定义你自己的对象</p>
	<h1>本章描述了怎样使用对象，属性，函数和方法，以及怎样创建你自己的对象</h1>










	<h1>对象和属性</h1>
	<p>一个 javascript 对象有很多属性</p>
	<p>一个对象的属性可以被解释成一个附加到对象上的变量</p>
	<p>对象的属性和普通的 javascript 变量基本没什么区别，仅仅是属性属于某个对象</p>
	<h2>使用:可以通过点符号来访问一个对象的属性</h2>
	<script>
		/*objectName.propertyName*/
	</script>
	<p>和其他 javascript 变量一样，对象的名字(可以是普通的变量)和属性的名字都是大小写敏感的。你可以在定义一个属性的时候就给它赋值</p>

	<script>
		/*创建一个myCar的对象然后给他三个属性，make，model，year*/
		var myCar = new Object();
		console.log(myCar);
		/*Object {}*/
		myCar.make = "Ford";
		console.log(myCar.make);
		/*Ford*/
		console.log(myCar);
		/*Object {make: "Ford"}*/
		myCar.model = "Mustang";
		console.log(myCar.model);
		/*Mustang*/
		console.log(myCar);
		/*Object {make: "Ford", model: "Mustang"}*/
		myCar.year = 1969;
		console.log(myCar.year);
		/*1969*/
		console.log(myCar);
		/*Object {make: "Ford", model: "Mustang", year: 1969}*/
	</script>

	<p>JavaScript 对象的属性也可以通过方括号访问. 对象有时也被叫作关联数组, 因为每个属性都有一个用于访问它的字符串值</p>

	<script>
		var myCar = new Object();
		console.log(myCar);
		/*Object {}*/
		myCar["make"] = "Ford";
		console.log(myCar.make);
		/*Ford*/
		console.log(myCar);
		/*Object {make: "Ford"}*/
		myCar["model"] = "mustang";
		console.log(myCar.model);
		/*mustang*/
		console.log(myCar);
		/*Object {make: "Ford", model: "mustang"}*/
		myCar["year"] = 1969
		console.log(myCar.year);
		/*1969*/
		console.log(myCar);
		/*Object {make: "Ford", model: "mustang", year: 1969}*/
	</script>

	<h3>注意:</h3>
	<p>一个对象的属性名可以是任何有效的 JavaScript 字符串,，或者可以被转换为字符串的任何东西，包括空字符串</p>
	<p>一个属性的名称如果不是一个有效的 JavaScript 标识符（例如，一个有空格或短横线，或者以数字开头的属性名），就只能通过方括号标记访问</p>
	<h3>这个标记法在属性名称是动态判定（属性名只有到运行时才能判定）时非常有用</h3>

	<script>
		var myObj = new Object();
				str = "myString",
				rand = Math.random(),
				obj = new Object();

		myObj.type 						= "Dot syntax";
		console.log(myObj);
		/*Object {type: "Dot syntax"}*/
		myObj["date created"] = "String with space";
		console.log(myObj);
		/*Object {type: "Dot syntax", date created: "String with space"}*/
		myObj[str]						= "String value";
		console.log(myObj);
		/*Object {type: "Dot syntax", date created: "String with space", myString: "String value"}*/
		myObj[rand]						=	"Random Number";
		console.log(myObj);
		/*Object {type: "Dot syntax", date created: "String with space", myString: "String value", 0.15392144008662245: "Random Number"}*/
		myObj[obj]						=	"Object";
		console.log(myObj);
		/*Object {type: "Dot syntax", date created: "String with space", myString: "String value", 0.15392144008662245: "Random Number", [object Object]: "Object"}*/
		myObj[""]							=	"Even an empty string";
		console.log(myObj);
		/*Object {type: "Dot syntax", date created: "String with space", myString: "String value", 0.15392144008662245: "Random Number", [object Object]: "Object"…}*/
	</script>

	<p>也可以通过存储在变量中的字符串来访问属性</p>

	<script type="text/javascript">
		var myCar = new Object();
		var propertyName = "make";
		myCar[propertyName] = "Ford";
		console.log(myCar);
		/*Object {make: "Ford"}*/

		propertyName = "model";
		myCar[propertyName] = "Mustang";
		console.log(myCar);
		/*Object {make: "Ford", model: "Mustang"}*/
	</script>

	<p>可以在  for...in 语句中使用方括号标记以枚举一个对象的所有属性</p>

	<script type="text/javascript">
		/*当你将对象及其名称作为参数传入时，显示对象的属性*/
		function showProps(obj, objName) {
			var result = "";
			for (var i in obj) {
				if (obj.hasOwnProperty(i)) {
					result += objName + "." + i + " = " + obj[i] + "\n";
				}
			}
			return result;
		}
	</script>

	<p>对于函数调用 showProps(myCar, "myCar") 将返回以下值</p>

	<script type="text/javascript">
		myCar.make = Ford;
		myCar.model = Mustang;
		myCar.year = 1969;
	</script>

	<h3>重点:对象即全部</h3>
	<h3>所有的原生类型除了 null 与 undefined 之外都被当作对象</h3>
	<h3>它们可以被赋予属性（某些类型的被赋予的属性不能被持久化），并且它们都有对象的全部特征</h3>










	<h1>枚举一个对象的所有属性</h1>
	<p>从 ECMAScript 5 开始，有三种原生的方法用于列出或枚举对象的属性</p>



	<h1>for...in循环</h1>
	<p>该方法依次访问一个对象及其原型链中所有可枚举的属性</p>



	<h1>Object.keys(o)</h1>
	<p>该方法返回一个对象的o自身包含（不包括原型中）的所有属性的名称的数组</p>




	<h1>Object.getOwnPropropertyName(o)</h1>
	<p>该方法返回一个数组，它包含了对象 o 所有拥有的属性（无论是否可枚举）的名称</p>


	<p>在 ECMAScript 5 中，没有原生的方法枚举一个对象的所有属性</p>

	<script type="text/javascript">
		function  listAllProperties(o) {
			var objectToInspect;
			var result = [];

			for(objectToInspect = 0; objectToInspect !== null; objectToInspect = Object.getPropertypeof(objectToInspect)) {
				result = result.concat(Object.getOwnPropertyName(objectToInspect));
			}

			return result;
		}
	</script>
</html>
